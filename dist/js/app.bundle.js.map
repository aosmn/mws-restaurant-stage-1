{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/dbhelper.js","webpack:///./js/main.js"],"names":["DBHelper","callback","xhr","XMLHttpRequest","open","DATABASE_URL","onload","status","json","JSON","parse","responseText","restaurants","error","send","id","fetchRestaurants","restaurant","find","r","cuisine","results","filter","cuisine_type","neighborhood","neighborhoods","map","v","i","uniqueNeighborhoods","indexOf","cuisines","uniqueCuisines","photograph","replace","marker","L","latlng","lat","lng","title","name","alt","url","urlForRestaurant","addTo","newMap","port","markers","document","addEventListener","initMap","fetchNeighborhoods","fetchCuisines","neighbourSelect","getElementById","cuisineSelect","window","innerWidth","tabIndex","filterBtn","getElementsByClassName","arrow","btnText","classList","contains","remove","innerHTML","add","console","self","fillNeighborhoodsHTML","select","forEach","option","createElement","value","append","fillCuisinesHTML","center","zoom","scrollWheelZoom","tileLayer","mapboxToken","maxZoom","attribution","updateRestaurants","cSelect","nSelect","cIndex","selectedIndex","nIndex","fetchRestaurantByCuisineAndNeighborhood","resetRestaurants","fillRestaurantsHTML","ul","createRestaurantHTML","addMarkersToMap","li","content","imageContainer","className","picture","srcLarge","setAttribute","imageUrlForRestaurant","srcMed","image","altText","src","address","moreContainer","more","href","mapMarkerForRestaurant","on","onClick","location","options","push","serviceWorker","registerServiceWorker","navigator","register","then","reg","controller","waiting","updateReady","installing","trackInstalling","refreshing","reload","worker","state","toast","refresh","dismiss","onclick","postMessage","action"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/main.js\");\n","/**\n * Common database helper functions.\n */\n/*eslint no-unused-vars: \"error\"*/\n\nclass DBHelper {\n\n\t/**\n   * Database URL.\n   * Change this to restaurants.json file location on your server.\n   */\n\tstatic get DATABASE_URL() {\n\t\tconst port = 1337; // Change this to your server port\n\t\treturn `http://localhost:${port}/restaurants`;\n\t}\n\n\t/**\n   * Fetch all restaurants.\n   */\n\tstatic fetchRestaurants(callback) {\n\t\tconst xhr = new XMLHttpRequest();\n\t\txhr.open('GET', DBHelper.DATABASE_URL);\n\t\txhr.onload = () => {\n\t\t\tif (xhr.status === 200) { // Got a success response from server!\n\t\t\t\tconst json = JSON.parse(xhr.responseText);\n\t\t\t\tconst restaurants = json.restaurants;\n\t\t\t\tcallback(null, restaurants);\n\t\t\t} else { // Oops!. Got an error from server.\n\t\t\t\tconst error =\n\t\t\t\t(`Request failed. Returned status of ${xhr.status}`);\n\n\t\t\t\tcallback(error, null);\n\t\t\t}\n\t\t};\n\t\txhr.send();\n\t}\n\n\t/**\n   * Fetch a restaurant by its ID.\n   */\n\tstatic fetchRestaurantById(id, callback) {\n\t\t// fetch all restaurants with proper error handling.\n\t\tDBHelper.fetchRestaurants((error, restaurants) => {\n\t\t\tif (error) {\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\tconst restaurant = restaurants.find(r => r.id == id);\n\t\t\t\tif (restaurant) { // Got the restaurant\n\t\t\t\t\tcallback(null, restaurant);\n\t\t\t\t} else { // Restaurant does not exist in the database\n\t\t\t\t\tcallback('Restaurant does not exist', null);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Fetch restaurants by a cuisine type with proper error handling.\n   */\n\tstatic fetchRestaurantByCuisine(cuisine, callback) {\n\t\t// Fetch all restaurants  with proper error handling\n\t\tDBHelper.fetchRestaurants((error, restaurants) => {\n\t\t\tif (error) {\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\t// Filter restaurants to have only given cuisine type\n\t\t\t\tconst results = restaurants.filter(r =>\n\t\t\t\t\tr.cuisine_type == cuisine);\n\t\t\t\tcallback(null, results);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Fetch restaurants by a neighborhood with proper error handling.\n   */\n\tstatic fetchRestaurantByNeighborhood(neighborhood, callback) {\n\t\t// Fetch all restaurants\n\t\tDBHelper.fetchRestaurants((error, restaurants) => {\n\t\t\tif (error) {\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\t// Filter restaurants to have only given neighborhood\n\t\t\t\tconst results = restaurants.filter(r =>\n\t\t\t\t\tr.neighborhood == neighborhood);\n\t\t\t\tcallback(null, results);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\n   */\n\tstatic fetchRestaurantByCuisineAndNeighborhood(\n\t\tcuisine,\n\t\tneighborhood,\n\t\tcallback) {\n\t\t// Fetch all restaurants\n\t\tDBHelper.fetchRestaurants((error, restaurants) => {\n\t\t\tif (error) {\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\tlet results = restaurants;\n\t\t\t\tif (cuisine != 'all') { // filter by cuisine\n\t\t\t\t\tresults = results.filter(r => r.cuisine_type == cuisine);\n\t\t\t\t}\n\t\t\t\tif (neighborhood != 'all') { // filter by neighborhood\n\t\t\t\t\tresults = results.filter(r =>\n\t\t\t\t\t\tr.neighborhood == neighborhood);\n\t\t\t\t}\n\t\t\t\tcallback(null, results);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Fetch all neighborhoods with proper error handling.\n   */\n\tstatic fetchNeighborhoods(callback) {\n\t\t// Fetch all restaurants\n\t\tDBHelper.fetchRestaurants((error, restaurants) => {\n\t\t\tif (error) {\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\t// Get all neighborhoods from all restaurants\n\t\t\t\tconst neighborhoods = restaurants.map((v, i) =>\n\t\t\t\t\trestaurants[i].neighborhood);\n\t\t\t\t// Remove duplicates from neighborhoods\n\t\t\t\tconst uniqueNeighborhoods = neighborhoods.filter((v, i) =>\n\t\t\t\t\tneighborhoods.indexOf(v) == i);\n\t\t\t\tcallback(null, uniqueNeighborhoods);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Fetch all cuisines with proper error handling.\n   */\n\tstatic fetchCuisines(callback) {\n\t\t// Fetch all restaurants\n\t\tDBHelper.fetchRestaurants((error, restaurants) => {\n\t\t\tif (error) {\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\t// Get all cuisines from all restaurants\n\t\t\t\tconst cuisines = restaurants.map((v, i) =>\n\t\t\t\t\trestaurants[i].cuisine_type);\n\t\t\t\t// Remove duplicates from cuisines\n\t\t\t\tconst uniqueCuisines = cuisines.filter((v, i) =>\n\t\t\t\t\tcuisines.indexOf(v) == i);\n\t\t\t\tcallback(null, uniqueCuisines);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n   * Restaurant page URL.\n   */\n\tstatic urlForRestaurant(restaurant) {\n\t\treturn (`/restaurant.html?id=${restaurant.id}`);\n\t}\n\n\t/**\n   * Restaurant image URL.\n   */\n\tstatic imageUrlForRestaurant(restaurant) {\n\t\treturn (`/img/${restaurant.photograph.replace('.jpg', '')}`);\n\t}\n\n\t/* eslint-disable */\n\t/**\n   * Map marker for a restaurant.\n   */\n\tstatic mapMarkerForRestaurant(restaurant, map) {\n\t\t// https://leafletjs.com/reference-1.3.0.html#marker\n\t\tconst marker = new L.marker([\n\t\t\trestaurant.latlng.lat, restaurant.latlng.lng\n\t\t], {\n\t\t\ttitle: restaurant.name,\n\t\t\talt: restaurant.name,\n\t\t\turl: DBHelper.urlForRestaurant(restaurant)\n\t\t})\n\t\tmarker.addTo(newMap);\n\t\treturn marker;\n\t}\n\t/* static mapMarkerForRestaurant(restaurant, map) {\n    const marker = new google.maps.Marker({\n      position: restaurant.latlng,\n      title: restaurant.name,\n      url: DBHelper.urlForRestaurant(restaurant),\n      map: map,\n      animation: google.maps.Animation.DROP}\n    );\n    return marker;\n  } */\n\n}\n\nexport default DBHelper;","import DBHelper from './dbhelper';\nlet restaurants,\n  neighborhoods,\n  cuisines\nlet newMap;\nlet markers = [];\n\n/**\n * Fetch neighborhoods and cuisines as soon as the page is loaded.\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n\tinitMap(); // added\n\tfetchNeighborhoods();\n\tfetchCuisines();\n\n\tconst neighbourSelect = document.getElementById('neighborhoods-select');\n\tconst cuisineSelect = document.getElementById('cuisines-select');\n\n\tif (window.innerWidth > 450) {\n\t\tneighbourSelect.tabIndex = 0;\n\t\tcuisineSelect.tabIndex = 0;\n\t}\n\n\t// show filter\n\tconst filterBtn = document.getElementById('show-filter');\n\tfilterBtn.addEventListener('click', () => {\n\t\tconst filter = document.getElementsByClassName('filter-options')[0];\n\t\tconst map = document.getElementById('map');\n\t\tconst arrow = document.getElementById('arrow');\n\t\tconst btnText = document.getElementById('btnText');\n\t\tif (filter.classList.contains('open')) {\n\t\t\tfilter.classList.remove('open');\n\t\t\tmap.classList.remove('smaller');\n\t\t\tarrow.innerHTML = '&#9660;';\n\t\t\tbtnText.innerHTML = 'Show filters ';\n\t\t\tneighbourSelect.tabIndex = -1;\n\t\t\tcuisineSelect.tabIndex = -1;\n\t\t} else {\n\t\t\tfilter.classList.add('open');\n\t\t\tmap.classList.add('smaller');\n\t\t\tarrow.innerHTML = '&#9650;';\n\t\t\tbtnText.innerHTML = 'Hide filters ';\n\t\t\tneighbourSelect.tabIndex = 0;\n\t\t\tcuisineSelect.tabIndex = 0;\n\t\t}\n\t});\n\n});\n\n/**\n * Fetch all neighborhoods and set their HTML.\n */\n/* eslint-disable no-console */\nconst fetchNeighborhoods = () => {\n\tDBHelper.fetchNeighborhoods((error, neighborhoods) => {\n\t\tif (error) { // Got an error\n\t\t\tconsole.error(error);\n\t\t} else {\n\t\t\tself.neighborhoods = neighborhoods;\n\t\t\tfillNeighborhoodsHTML();\n\t\t}\n\t});\n};\n/* eslint-enable no-console */\n/**\n * Set neighborhoods HTML.\n */\nconst fillNeighborhoodsHTML = (neighborhoods = self.neighborhoods) => {\n\tconst select = document.getElementById('neighborhoods-select');\n\tneighborhoods.forEach(neighborhood => {\n\t\tconst option = document.createElement('option');\n\t\toption.innerHTML = neighborhood;\n\t\toption.value = neighborhood;\n\t\tselect.append(option);\n\t});\n};\n\n/**\n * Fetch all cuisines and set their HTML.\n */\n/* eslint-disable no-console */\nconst fetchCuisines = () => {\n\tDBHelper.fetchCuisines((error, cuisines) => {\n\t\tif (error) { // Got an error!\n\t\t\tconsole.error(error);\n\t\t} else {\n\t\t\tself.cuisines = cuisines;\n\t\t\tfillCuisinesHTML();\n\t\t}\n\t});\n};\n/* eslint-enable no-console */\n/**\n * Set cuisines HTML.\n */\nconst fillCuisinesHTML = (cuisines = self.cuisines) => {\n\tconst select = document.getElementById('cuisines-select');\n\n\tcuisines.forEach(cuisine => {\n\t\tconst option = document.createElement('option');\n\t\toption.innerHTML = cuisine;\n\t\toption.value = cuisine;\n\t\tselect.append(option);\n\t});\n};\n\n/**\n * Initialize leaflet map, called from HTML.\n */\n/*eslint-disable*/\nconst initMap = () => {\n\tself.newMap = L.map('map', {\n\t\tcenter: [\n\t\t\t40.722216, -73.987501\n\t\t],\n\t\tzoom: 12,\n\t\tscrollWheelZoom: false\n\t});\n\tL.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}', {\n\t\tmapboxToken: 'pk.eyJ1IjoiYW9zbW4iLCJhIjoiY2prOW1lYWV6MjJoNjN3cGFzZ3cybnhhbCJ9.MooMDpdnW4vnA4Aee7JnDQ',\n\t\tmaxZoom: 18,\n\t\tattribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, ' + '<a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, ' + 'Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n\t\tid: 'mapbox.streets'\n\t}).addTo(newMap);\n\n\tupdateRestaurants();\n}\n/*eslint-enable*/\n\n/* window.initMap = () => {\n  let loc = {\n    lat: 40.722216,\n    lng: -73.987501\n  };\n  self.map = new google.maps.Map(document.getElementById('map'), {\n    zoom: 12,\n    center: loc,\n    scrollwheel: false\n  });\n  updateRestaurants();\n} */\n\n/**\n * Update page and map for current restaurants.\n */\n/* eslint-disable no-console */\nconst updateRestaurants = () => {\n\tconst cSelect = document.getElementById('cuisines-select');\n\tconst nSelect = document.getElementById('neighborhoods-select');\n\n\tconst cIndex = cSelect.selectedIndex;\n\tconst nIndex = nSelect.selectedIndex;\n\n\tconst cuisine = cSelect[cIndex].value;\n\tconst neighborhood = nSelect[nIndex].value;\n\n\tDBHelper.fetchRestaurantByCuisineAndNeighborhood(\n\t\tcuisine,\n\t\tneighborhood,\n\t\t(error, restaurants) => {\n\t\t\tif (error) { // Got an error!\n\t\t\t\tconsole.error(error);\n\t\t\t} else {\n\t\t\t\tresetRestaurants(restaurants);\n\t\t\t\tfillRestaurantsHTML();\n\t\t\t}\n\t\t});\n};\n/* eslint-enable no-console */\n/**\n * Clear current restaurants, their HTML and remove their map markers.\n */\nconst resetRestaurants = (restaurants) => {\n\t// Remove all restaurants\n\tself.restaurants = [];\n\tconst ul = document.getElementById('restaurants-list');\n\tul.innerHTML = '';\n\n\t// Remove all map markers\n\tif (self.markers) {\n\t\tself.markers.forEach(marker => marker.remove());\n\t}\n\tself.markers = [];\n\tself.restaurants = restaurants;\n};\n\n/**\n * Create all restaurants HTML and add them to the webpage.\n */\nconst fillRestaurantsHTML = (restaurants = self.restaurants) => {\n\tconst ul = document.getElementById('restaurants-list');\n\trestaurants.forEach(restaurant => {\n\t\tul.append(createRestaurantHTML(restaurant));\n\t});\n\taddMarkersToMap();\n};\n\n/**\n * Create restaurant HTML.\n */\nconst createRestaurantHTML = (restaurant) => {\n\tconst li = document.createElement('li');\n\tconst content = document.createElement('div');\n\tcontent.classList.add('content');\n\n\tconst imageContainer = document.createElement('div');\n\timageContainer.className = 'restaurant-img-container';\n\n\tconst picture = document.createElement('picture');\n\tconst srcLarge = document.createElement('source');\n\tsrcLarge.setAttribute('media', '(min-width: 800px)');\n\tsrcLarge.setAttribute('srcset', `${\n\t\tDBHelper.imageUrlForRestaurant(restaurant)}-1600_large_1x.jpg 1x, ${\n\t\tDBHelper.imageUrlForRestaurant(restaurant)}-1600_large_2x.jpg 2x`);\n\tconst srcMed = document.createElement('source');\n\tsrcMed.setAttribute('media', '(min-width: 800px)');\n\tsrcMed.setAttribute('srcset', `${\n\t\tDBHelper.imageUrlForRestaurant(restaurant)}-800_medium_1x.jpg 1x, ${\n\t\tDBHelper.imageUrlForRestaurant(restaurant)}-800_medium_2x.jpg 2x`);\n\n\tpicture.append(srcLarge);\n\tpicture.append(srcMed);\n\n\tconst image = document.createElement('img');\n\timage.className = 'restaurant-img';\n\tconst altText = `restaurant ${\n\t\trestaurant.name}, ${restaurant.cuisine_type} cuisine`;\n\timage.setAttribute('alt', altText);\n\timage.src = DBHelper.imageUrlForRestaurant(restaurant) + '-600_small.jpg';\n\tpicture.append(image);\n\timageContainer.append(picture);\n\tli.append(imageContainer);\n\n\tconst name = document.createElement('h1');\n\tname.innerHTML = restaurant.name;\n\tcontent.append(name);\n\n\tconst neighborhood = document.createElement('p');\n\tneighborhood.innerHTML = restaurant.neighborhood;\n\tcontent.append(neighborhood);\n\n\tconst address = document.createElement('p');\n\taddress.innerHTML = restaurant.address;\n\tcontent.append(address);\n\n\tconst moreContainer = document.createElement('div');\n\tmoreContainer.className = 'actions';\n\tconst more = document.createElement('a');\n\tmore.innerHTML = 'View Details';\n\tmore.setAttribute('aria-label', `${\n\t\trestaurant.name}, view restaurant details`);\n\tmore.href = DBHelper.urlForRestaurant(restaurant);\n\tmoreContainer.append(more);\n\n\tli.append(content);\n\tli.append(moreContainer);\n\n\treturn li;\n};\n\n/**\n * Add markers for current restaurants to the map.\n */\nconst addMarkersToMap = (restaurants = self.restaurants) => {\n\trestaurants.forEach(restaurant => {\n\t\t// Add marker to the map\n\t\tconst marker = DBHelper.mapMarkerForRestaurant(restaurant, self.newMap);\n\t\tmarker.on('click', onClick);\n\t\tfunction onClick() {\n\t\t\twindow.location.href = marker.options.url;\n\t\t}\n\t\tself.markers.push(marker);\n\t});\n\n};\n/* addMarkersToMap = (restaurants = self.restaurants) => {\n  restaurants.forEach(restaurant => {\n    // Add marker to the map\n    const marker = DBHelper.mapMarkerForRestaurant(restaurant, self.map);\n    google.maps.event.addListener(marker, 'click', () => {\n      window.location.href = marker.url\n    });\n    self.markers.push(marker);\n  });\n} */\n\n// =============================================================================\nlet serviceWorker = {};\nconst registerServiceWorker = () => {\n\tif (!navigator.serviceWorker)\n\t\treturn;\n\tnavigator.serviceWorker.register('../sw.js').then(reg => {\n\t\tif (!navigator.serviceWorker.controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (reg.waiting) {\n\t\t\tserviceWorker = reg.waiting;\n\t\t\tupdateReady(reg.waiting);\n\t\t\treturn;\n\t\t}\n\n\t\tif (reg.installing) {\n\t\t\tserviceWorker = reg.installing;\n\t\t\ttrackInstalling(reg.installing);\n\t\t\treturn;\n\t\t}\n\n\t\treg.addEventListener('updatefound', () => {\n\t\t\tserviceWorker = reg.installing;\n\t\t\ttrackInstalling(reg.installing);\n\t\t});\n\t});\n\n\t// Ensure refresh is only called once.\n\t// This works around a bug in \"force update on reload\".\n\tlet refreshing;\n\tnavigator.serviceWorker.addEventListener('controllerchange', () => {\n\t\tif (refreshing)\n\t\t\treturn;\n\t\twindow.location.reload();\n\t\trefreshing = true;\n\t});\n};\n\nconst trackInstalling = worker => {\n\tworker.addEventListener('statechange', () => {\n\t\tif (worker.state == 'installed') {\n\t\t\tupdateReady(worker);\n\t\t}\n\t});\n};\n\nconst updateReady = () => {\n\tconst toast = document.getElementById('simple-toast');\n\ttoast.setAttribute('class', 'visible');\n};\n\nregisterServiceWorker();\n\n// USING PURE JS To AVOID NEEDING TO CACHE JQUERY , SAVE MEMORY\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst toast = document.getElementById('simple-toast');\n\tconst refresh = document.getElementById('refresh');\n\tconst dismiss = document.getElementById('dismiss');\n\n\trefresh.onclick = () => {\n\t\t// console.log('refreshed');\n\t\tserviceWorker.postMessage({action: 'skipWaiting'});\n\t};\n\tdismiss.onclick = () => {\n\t\ttoast.setAttribute('class', '');\n\t};\n});"],"sourceRoot":""}